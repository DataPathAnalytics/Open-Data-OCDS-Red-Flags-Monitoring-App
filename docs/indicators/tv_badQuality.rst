.. _tv_badQuality:

=============
tv_badQuality
=============

******************************
Суть транзакционной переменной
******************************

Данная транзакционная переменная отражает качество данных конкурса - достаточно ли данных для расчета индикаторов и отображения данных о конкурсе в интерфейсе приложения. Значение переменной, равное ``1``, означает, что качество данных не обеспечивает безошибочного расчета индикаторов и/или корректектного отображеня данных о конкурсе в интерфейсе приложения. Значение ``0`` говорит о том, что качество данных на должном уровне для расчета индикаторов и отображения данных о конкурсе в интерфейсе приложения.

*********************
Объект характеристики
*********************

Данная переменная характеризует процедуру.

*******************************
Форма транзакционной переменной
*******************************

Данная транзакционная переменная - логическое значение (``0``, ``1``).

********************************
Расчет транзакционной переменной
********************************

Для расчета транзакционной переменной используется:

- API системы государственных закупок в OCDS формате.

****************
Поля для расчета
****************

- ``data.tender.lots.status``
- ``data.tender.lots.id``
- ``data.tender.status``
- ``data.tender.statusDetails``
- ``data.bids.details.relatedLots.id``
- ``data.bids.details.relatedLots.value.amount``
- ``data.tender``
- ``data.tender.lots``
- ``data.bids``
- ``data.awards``


***************
Формула расчета
***************

1. Если статус конкурса ``data.tender.status='active'``, но все лоты конкурса имеют статус ``data.tender.lots.status='cancelled'`` или ``data.tender.lots.status='unsuccessful'``, переменная принимает значение ``1``, расчет заканчивается.

2. Переменная принимает значение ``1`` в одном из следующих случаев.
2.1. Если в конкурсе отсутствует ``data.tender``, ``data.tender.lots``.
2.2. Если стадия конкурса ``data.tender.statusDetails`` равна ``bidsOpened``, ``evaluationResultsPending``, ``evaluationComplete``, ``contractSigned`` и при этом  в конкурсе отсутствует блок ``data.bids``.
2.3. Если стадия конкурса ``data.tender.statusDetails`` равна ``evaluationResultsPending``, ``evaluationComplete``, ``contractSigned`` и при этом  в конкурсе отсутствует блок ``data.awards``.

3. При обновлении данных тендера, собираем список уже существующих в нем блоков: ``data.tender.items``, ``data.tender.lots``, ``data.bids``, ``data.awards``, ``data.contracts``. Если хоть один из блоков находится в списке существующих, но отсутствует в обновлении, переменная принимает значение ``1``.

4. Если мы дошли до этого пункта, переменная принимает значение ``0``, расчет заканчивается.

