############################################################################################
MKRAI3. 2 и больше объявления закупок методом прямого заключения договора для одного предмета закупки по причине дозакупок товаров, услуг, работ до 5% от стоимости предыдущего конкурса.
############################################################################################

***************
Суть индикатора
***************

Индикатор исследует случаи, когда закупающая организация превышает дозволенную границу в 5% для дозакупки товаров/услуг/работ используя метод прямого заключения договора.

****
Риск
****
Избегание закупающей организацией проведения конкурсных закупок. 

*******************************
Нарушение норм/принципов закона
*******************************

Проведение двух и более дозакупок одного предмета закупки с помощью метода прямого заключения договора может использоваться для превышения нормы в 5% от суммы базового конкурса, что нарушает статью 21, пункт 4, подпункт 1 Закона "О государственных закупках".

***********************************
Основание для разработки индикатора
***********************************

Индикатор вводится, так как в системе не реализован контроль количества дозакупок одного и того же предмета закупки.

*******************************
Методология расчета индикатора.
*******************************

Уровень расчета
===============
Индикатор расcчитывается на уровне *конкурса*.

Источники данных для расчета
============================

Для расчета индикатора используются следующие источники данных:

- API системы государственных закупок в OCDS формате
- Аналитическая таблица :ref:`tbl_additionalProcurements`
- Транзакционна переменная :ref:`tv_tenderCPVList`

Типы конкурсов
==============

Индикатор рассчитывается для следующих типов конкурсов:

- метод прямого заключения договора.


Статусы конкурсов
-----------------

Индикатор расчитывается для процедур, которые:

- находятся в статусе ``published``


Частота расчета
===============

Если выполнены все условия для активации расчета индикатора, он рассчитывается каждый раз после изменений в JSON-документе конкурса. Также индикатор расчитывается один раз в сутки, если выполнены все условия для его расчета.


Поля для расчета
================

Для расчета индикатора используются следующие поля API модуля системы гос. закупок:

- ``data.tender.procurementMethodRationale``
- ``data.tender.procurementMethodDetails``
- ``data.parties.id``
- ``data.parties.roles``

Для расчета используется следующая транзакционная переменная:

- :ref:`tv_tenderCPVList`

Для расчета используется следующая аналитическая таблица:

- :ref:`tbl_additionalProcurements`

Формула расчета
===============

1. Выбираем только закупки, у которых ``data.tender.procurementMethodRationale='additionalProcurement5'``.

2. Выбираем идентификатор закупающей организации - ``data.parties.id``, где ``data.parties.roles='buyer'``.

3. Выбираем все предметы закупки из переменной :ref:`tv_tenderCPVList`.

4. По идентификатору закупающей организации для каждого кода предмета закупки проводим поиск строк в таблице :ref:`tbl_additionalProcurements`.

5. Если находим соответствующую строку в таблице, индикатор принимает значение ``1``. Если не находим, индикатор принимает значение ``0``.

Факторы, которые влияют на корректное срабатывание индикатора
=============================================================

Индикатор может срабатывать неправильнов случае, когда представитель закупающей организации неправильно ввел номер конкурса, на который ссылается в закупке или неправильно выбрал обоснование проведения закупки методом прямого заключения договора.
